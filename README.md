# –ò–∑–º–µ—Ä–∏—Ç–µ–ª—å —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –Ω–∞ STM32 —Å HC-SR04, LCD1602 –∏ PWM-–∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π.

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–µ–∞–ª–∏–∑—É–µ—Ç **–∏–∑–º–µ—Ä–∏—Ç–µ–ª—å —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è** –Ω–∞ –±–∞–∑–µ **—É–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–≤–æ–≥–æ –¥–∞—Ç—á–∏–∫–∞ HC-SR04** –∏ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ **STM32F103C8T6 (Blue Pill)**. –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –Ω–∞ **LCD1602 –ø–æ I2C**, –∞ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è **—Å–≤–µ—Ç–æ–¥–∏–æ–¥—ã –∏ –∑—É–º–º–µ—Ä —Å PWM-—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º** –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ –±–ª–∏–∑–æ—Å—Ç–∏ –æ–±—ä–µ–∫—Ç–æ–≤.

---

## üì∏ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üß≠ –¢–æ—á–Ω–æ–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è –≤ —Å–∞–Ω—Ç–∏–º–µ—Ç—Ä–∞—Ö
- üìü –í—ã–≤–æ–¥ –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞ LCD1602 –ø–æ I2C
- üí° –ü–ª–∞–≤–Ω–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è —Å –ø–æ–º–æ—â—å—é 4 —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤ (PWM)
- üîä –ó—É–º–º–µ—Ä —Å –∏–∑–º–µ–Ω—è—é—â–∏–º—Å—è —É—Ä–æ–≤–Ω–µ–º —Å–∏–≥–Ω–∞–ª–∞ –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏
- üß© –ß–∏—Å—Ç—ã–π –∏ –º–æ–¥—É–ª—å–Ω—ã–π –∫–æ–¥ –Ω–∞ –æ—Å–Ω–æ–≤–µ HAL + DWT-–∑–∞–¥–µ—Ä–∂–µ–∫

---

## üìê –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç         | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                             |
|-------------------|----------------------------------------|
| STM32F103C8T6     | –ú–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä ("Blue Pill")          |
| HC-SR04           | –£–ª—å—Ç—Ä–∞–∑–≤—É–∫–æ–≤–æ–π –¥–∞—Ç—á–∏–∫ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è       |
| LCD1602 + I2C     | 16x2 —Å–∏–º–≤–æ–ª–æ–≤, —á–µ—Ä–µ–∑ –º–æ–¥—É–ª—å PCF8574    |
| –°–≤–µ—Ç–æ–¥–∏–æ–¥—ã (x4)   | –ò–Ω–¥–∏–∫–∞—Ü–∏—è —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è (PWM –Ω–∞ TIM3)     |
| –ó—É–º–º–µ—Ä            | –ó–≤—É–∫–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è (PWM –Ω–∞ TIM2_CH1)   |
| –ü–∏—Ç–∞–Ω–∏–µ 5–í        | –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã    |

---

## üìå –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ         | –ü–∏–Ω STM32        | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ                    |
|--------------------|------------------|-------------------------------|
| TRIG               | PA0              | –í—ã—Ö–æ–¥ –Ω–∞ TRIG HC-SR04         |
| ECHO               | PA1              | –í—Ö–æ–¥ —Å ECHO HC-SR04           |
| LCD1602 (I2C)      | PB6 / PB7        | I2C1 (SCL / SDA)              |
| LED 1              | PA6 (TIM3_CH1)   | –ë–ª–∏–∂–Ω–∏–π c–≤–µ—Ç–æ–¥–∏–æ–¥             |
| LED 2              | PA7 (TIM3_CH2)   |                               |
| LED 3              | PB0 (TIM3_CH3)   |                               |
| LED 4              | PB1 (TIM3_CH4)   | –î–∞–ª—å–Ω–∏–π c–≤–µ—Ç–æ–¥–∏–æ–¥             |
| Buzzer             | PA15 (TIM2_CH1)  | –ó—É–º–º–µ—Ä                        |

---

## üìè –ó–æ–Ω—ã —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π –∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

| –†–∞—Å—Å—Ç–æ—è–Ω–∏–µ (—Å–º)  | –°–≤–µ—Ç–æ–¥–∏–æ–¥—ã     | PWM –∑—É–º–º–µ—Ä–∞          |
|------------------|----------------|----------------------|
| > 40             | –í—Å–µ –≤—ã–∫–ª—é—á–µ–Ω—ã  | –ë–µ–∑ –∑–≤—É–∫–∞            |
| 30 ‚Äì 40          | LED1 –≤–∫–ª—é—á–∞–µ—Ç—Å—è| 30 / 1000 (–Ω–∏–∑–∫–∏–π)   |
| 20 ‚Äì 30          | LED2           | 150 / 1000 (—Å—Ä–µ–¥–Ω–∏–π) |
| 10 ‚Äì 20          | LED3           | 300 / 1000 (–≤—ã—Å–æ–∫–∏–π) |
| 0 ‚Äì 10           | LED4           | 700 / 1000 (–º–∞–∫—Å–∏–º—É–º)|

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
stm32-ultrasonic-distance/
‚îú‚îÄ‚îÄ Core/                     # –ò—Å—Ö–æ–¥–Ω–∏–∫–∏ –∏ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ ‚îú‚îÄ‚îÄ Inc/                    # –ó–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã (.h)
‚îÇ ‚îî‚îÄ‚îÄ Src/                    # –ò—Å—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã (.c)
‚îú‚îÄ‚îÄ Drivers/                  # –î—Ä–∞–π–≤–µ—Ä—ã STM32 HAL
‚îú‚îÄ‚îÄ lcd1602_i2c_lib/          # –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–∏—Å–ø–ª–µ—è
‚îú‚îÄ‚îÄ .gitignore                # –ò—Å–∫–ª—é—á–µ–Ω–∏—è Git
‚îú‚îÄ‚îÄ HY-SRF05_LCD1602_HAL.ioc  # STM32CubeMX —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ README.md                 # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---
## ‚öôÔ∏è –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1. –û—Ç–∫—Ä–æ–π —Ñ–∞–π–ª `HY-SRF05_LCD1602_HAL.ioc` –≤ **STM32CubeIDE**
2. –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –∏ —Å–æ–±–µ—Ä–∏ –ø—Ä–æ–µ–∫—Ç (`Ctrl + B`)
3. –ü—Ä–æ—à–µ–π —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —á–µ—Ä–µ–∑ ST-Link
4. –ü–æ–¥–∫–ª—é—á–∏ –º–æ–¥—É–ª–∏ –ø–æ —Ç–∞–±–ª–∏—Ü–µ –≤—ã—à–µ
5. –°–º–æ—Ç—Ä–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –Ω–∞ —ç–∫—Ä–∞–Ω–µ –∏ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞—Ö
- [–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ ST-LINK V2](https://github.com/user-attachments/assets/11cf20ef-1757-43f4-bd80-f0e9caa32841)
---

## üîé –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è **DWT (Data Watchpoint and Trace)** –¥–ª—è —Ç–æ—á–Ω—ã—Ö –∑–∞–¥–µ—Ä–∂–µ–∫ –≤ –º–∏–∫—Ä–æ—Å–µ–∫—É–Ω–¥–∞—Ö
- –ß–∞—Å—Ç–æ—Ç—ã –∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—ã –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è PWM –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω—è—Ç—å —á–µ—Ä–µ–∑ TIM2 –∏ TIM3
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ LCD –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —è—Ä–∫–æ—Å—Ç—å—é —Å–¥–µ–ª–∞–Ω–æ —á–µ—Ä–µ–∑ HAL –±–µ–∑ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫

---

## üé• –°–∫—Ä–∏–Ω—à–æ—Ç—ã –∏ –≤–∏–¥–µ–æ

- [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ CubeMX](https://github.com/user-attachments/assets/e23de54b-0466-4e76-ac48-c7fb93afa050)
- [–í–∏–¥–µ–æ](https://youtube.com/shorts/hrjaTZsLUqA?feature=share)